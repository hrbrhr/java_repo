–ê –µ—Å—Ç—å –ª–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤ —Ç–æ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤–∞ –≤ –ø–∞–º—è—Ç–∏ –ª–µ–∂–∞—Ç –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–π–∫–∞—Ö –ø–∞–º—è—Ç–∏?

–î–∞, –µ—Å—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ –≤–∞–∂–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤ —Ç–æ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤–∞
—Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–π–∫–∞—Ö –ø–∞–º—è—Ç–∏ ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–ª—é—Å—ã:

üí° 1. –ö—ç—à-–ø–∞–º—è—Ç—å (CPU Cache)
–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—ç—à, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º.
–ö–æ–≥–¥–∞ —Ç—ã –æ–±—Ä–∞—â–∞–µ—à—å—Å—è –∫ —ç–ª–µ–º–µ–Ω—Ç—É –º–∞—Å—Å–∏–≤–∞, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –æ–Ω,
–Ω–æ –∏ –µ–≥–æ "—Å–æ—Å–µ–¥–∏" ‚Äî –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–ø–µ–∫—É–ª—è—Ç–∏–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—É
–ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç–∏.

–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å: –µ—Å–ª–∏ —Ç—ã –æ–±—Ä–∞—â–∞–µ—à—å—Å—è –∫ arr[0],
—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Ç—ã –±—É–¥–µ—à—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∏ –∫ arr[1], arr[2], –∏ —Ç.–¥.

–ö—ç—à –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ä–∞–∑—É –±–ª–æ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 64 –±–∞–π—Ç–∞), –∏ –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤
–ª–µ–∂–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —ç—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º.

–ü—Ä–æ—Ñ–∏—Ç: –±—ã—Å—Ç—Ä–µ–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Ü–∏–∫–ª–∞—Ö.

üß† 2. –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É
–ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–¥—É—Ç –ø–æ–¥—Ä—è–¥, —Ç–æ –∞–¥—Ä–µ—Å arr[i] –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å:

–∞–¥—Ä–µ—Å = base_address + i * sizeof(element)
–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–æ—Å—Ç—É–ø –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–º –∏ –ø—Ä–æ—Å—Ç—ã–º ‚Äî –ø—Ä–æ—Å—Ç–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞.

üöÄ 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
(–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–æ–≤, –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ —Ç.–ø.),
–µ—Å–ª–∏ –∑–Ω–∞—é—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤–∞ –∏–¥—É—Ç –ø–æ–¥—Ä—è–¥.

üßÆ 4. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ SIMD
–ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥—Ä—è–¥, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∑–∞ —Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑—É—è –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
(–Ω–∞–ø—Ä–∏–º–µ—Ä, SSE/AVX –Ω–∞ x86).

üßµ 5. –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–æ—Ç–æ–∫–∞–º–∏
–ï—Å–ª–∏ –∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–≤–æ—é —á–∞—Å—Ç—å –º–∞—Å—Å–∏–≤–∞, –º–µ–Ω—å—à–µ
–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å false sharing (–∫–æ–≥–¥–∞ –ø–æ—Ç–æ–∫–∏ —Å–ª—É—á–∞–π–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç
–æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–µ—à-–ª–∏–Ω–∏—é), –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—Ä–æ–≤–Ω–µ–Ω.

üìâ –ß—Ç–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–¥—Ä—è–¥?
–ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–ø–∏—Å–∫–µ –∏–ª–∏ –¥–µ—Ä–µ–≤–µ), —Ç–æ:

- –º–Ω–æ–≥–æ –∫—ç—à-–ø—Ä–æ–º–∞—Ö–æ–≤
- –º–µ–¥–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
- —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ–º –∞–¥—Ä–µ—Å–∞
- –±–æ–ª—å—à–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ (—É–∫–∞–∑–∞—Ç–µ–ª–∏, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è)

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞, –≤–æ–ø—Ä–æ—Å—ã –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –ø—Ä–æ–µ–∫—Ç—É
* [–¢–µ–ª–µ–≥—Ä–∞–º–º –≥—Ä—É–ø–ø–∞ –ø—Ä–æ–µ–∫—Ç–∞](https://t.me/+mvRhG9YECTlkZjQ0)
* [–¢–µ–ª–µ–≥—Ä–∞–º–º –∞–≤—Ç–æ—Ä–∞ –∫—É—Ä—Å–∞] (@javagurulv)
* [–ï–º–µ–π–ª –∞–≤—Ç–æ—Ä–∞ –∫—É—Ä—Å–∞] (itguruby@mail.ru)
